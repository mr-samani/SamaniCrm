<div class="d-flex align-items-center justify-content-between">
  <span>Box Shadow</span>
  <button (click)="addShadow(list)" class="btn"><i class="fa fa-plus"></i></button>
</div>
<div class="list-box" #list>
  @for (item of shadows; let i = $index; track i) {
    <button
      type="button"
      class="list-item"
      [class.active]="item == selectedShadow"
      #el
      (click)="setShadow(el, item, i)">
      <span>{{ item.cssValue }}</span>
      <button (click)="removeShadow(i)" class="btn"><i class="fa fa-times"></i></button>
    </button>
  }
</div>

<div class="popup-container" *ngIf="showPopup" [style.left.px]="popupPosition.x" [style.top.px]="popupPosition.y">
  @if (selectedShadow) {
    <div class="d-flex align-items-center justify-content-between">
      <div class="btn-group" role="group">
        <input
          type="radio"
          class="btn-check"
          name="showside"
          id="SHoutside"
          autocomplete="off"
          [(ngModel)]="selectedShadow.inset"
          (ngModelChange)="updateShadow({ inset: selectedShadow.inset })"
          [value]="false" />
        <label class="btn" for="SHoutside" title="Outside">Outside</label>
        <input
          type="radio"
          class="btn-check"
          name="showside"
          id="SHinside"
          autocomplete="off"
          [(ngModel)]="selectedShadow.inset"
          (ngModelChange)="updateShadow({ inset: selectedShadow.inset })"
          [value]="true" />
        <label class="btn" for="SHinside" title="Inside">Inside</label>
      </div>
      <button class="btn" (click)="showPopup = false"><i class="fa fa-times"></i></button>
    </div>

    <div class="pad-container" #pad (mousedown)="onPadClick($event)" (touchstart)="onPadClick($event)">
      <div class="card-sample" [style.boxShadow]="selectedShadow.cssValue"></div>
      <svg
        class="flashlight-svg"
        viewBox="0 0 640 512"
        xmlns="http://www.w3.org/2000/svg"
        #flashlight
        [style.left.px]="x"
        [style.top.px]="y"
        (mousedown)="dragStart($event)"
        (touchstart)="dragStart($event)">
        <defs>
          <style>
            .fa-secondary {
              opacity: 0.4;
            }
          </style>
        </defs>
        <path
          class="fa-primary"
          d="M607.1 96h-32v320h32c17.62 0 32-14.38 32-32V128C639.1 110.4 625.6 96 607.1 96zM287.1 224h-32c-17.62 0-32 14.38-32 32s14.38 32 32 32h32c17.62 0 32-14.38 32-32S305.6 224 287.1 224z" />
        <path
          class="fa-secondary"
          d="M400.1 149.2L383.1 160H31.1c-17.62 0-32 14.38-32 32v128c0 17.62 14.38 32 32 32h352l16.12 10.75C443.2 391.5 511.1 416 575.1 416V96C511.1 96 443.2 120.5 400.1 149.2zM287.1 288h-32c-17.62 0-32-14.38-32-32s14.38-32 32-32h32c17.62 0 32 14.38 32 32S305.6 288 287.1 288z" />
      </svg>
    </div>
    <div class="shadow-item">
      <table>
        <tr>
          <th>
            <span>X</span>
          </th>
          <td>
            <div class="d-flex">
              <input
                type="range"
                [min]="-maxRange"
                [max]="maxRange"
                [(ngModel)]="selectedShadow.xOffset"
                (ngModelChange)="updateShadow({ xOffset: selectedShadow.xOffset })" />
              <input
                type="number"
                [min]="-maxRange"
                [max]="maxRange"
                [(ngModel)]="selectedShadow.xOffset"
                (ngModelChange)="updateShadow({ xOffset: selectedShadow.xOffset })" />
            </div>
          </td>
        </tr>
        <tr>
          <th>
            <span>Y</span>
          </th>
          <td>
            <div class="d-flex">
              <input
                type="range"
                [min]="-maxRange"
                [max]="maxRange"
                [(ngModel)]="selectedShadow.yOffset"
                (ngModelChange)="updateShadow({ yOffset: selectedShadow.yOffset })" />
              <input
                type="number"
                [min]="-maxRange"
                [max]="maxRange"
                [(ngModel)]="selectedShadow.yOffset"
                (ngModelChange)="updateShadow({ yOffset: selectedShadow.yOffset })" />
            </div>
          </td>
        </tr>
        <tr>
          <th>
            <span>Blur</span>
          </th>
          <td>
            <div class="d-flex">
              <input
                type="range"
                [min]="0"
                [max]="maxRange"
                [(ngModel)]="selectedShadow.blurRadius"
                min="0"
                (ngModelChange)="updateShadow({ blurRadius: selectedShadow.blurRadius })" />
              <input
                type="number"
                [min]="0"
                [max]="maxRange"
                [(ngModel)]="selectedShadow.blurRadius"
                min="0"
                (ngModelChange)="updateShadow({ blurRadius: selectedShadow.blurRadius })" />
            </div>
          </td>
        </tr>
        <tr>
          <th>
            <span>Spread</span>
          </th>
          <td>
            <div class="d-flex">
              <input
                type="range"
                [min]="0"
                [max]="maxRange"
                [(ngModel)]="selectedShadow.spreadRadius"
                (ngModelChange)="updateShadow({ spreadRadius: selectedShadow.spreadRadius })" />
              <input
                type="number"
                [min]="0"
                [max]="maxRange"
                [(ngModel)]="selectedShadow.spreadRadius"
                (ngModelChange)="updateShadow({ spreadRadius: selectedShadow.spreadRadius })" />
            </div>
          </td>
        </tr>
        <tr>
          <th>
            <span>Color</span>
          </th>
          <td>
            <input
              type="text"
              [(ngModel)]="selectedShadow.color"
              (ngModelChange)="updateShadow({ color: selectedShadow.color })"
              ngxInputColor
              [simpleMode]="true"
              [showCloseButton]="false"
              [showConfirmButton]="false" />
          </td>
        </tr>
      </table>
    </div>
  }
</div>
